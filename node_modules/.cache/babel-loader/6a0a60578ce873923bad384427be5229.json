{"ast":null,"code":"import _slicedToArray from\"D:\\\\JS-React\\\\dimshishlik_update_23.08.2023\\\\DimShashlik\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{setBasketItemMinus,addItems,removeItems}from\"../../../redux/slices/basketSlice\";import styles from\"./CardButton.module.css\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CardButton(props){var _props$date=props.date,id=_props$date.id,name=_props$date.name,price=_props$date.price,img=_props$date.img;var dispatch=useDispatch();var basketItem=useSelector(function(state){return state.basket.items.find(function(obj){return obj.id===id;});});var _React$useState=React.useState(!basketItem),_React$useState2=_slicedToArray(_React$useState,2),isAmountValid=_React$useState2[0],setIsAmountValid=_React$useState2[1];var addedAmount=basketItem==undefined?0:basketItem.amount;useEffect(function(){if(addedAmount===0){setIsAmountValid(true);}},[addedAmount]);var addCountPlus=function addCountPlus(){var cartItemId={id:id};dispatch(addItems(cartItemId));};var addCountMinus=function addCountMinus(){if(basketItem.amount<=1){setIsAmountValid(true);dispatch(removeItems(id));}else{dispatch(setBasketItemMinus(id));}};var addOrder=function addOrder(){var cartItem={id:id,name:name,price:price,img:img};dispatch(addItems(cartItem));setIsAmountValid(false);};var inputQuantity=isAmountValid?/*#__PURE__*/_jsx(\"button\",{onClick:addOrder,children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"}):/*#__PURE__*/_jsx(\"div\",{className:styles.inputContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.quantityButton,onClick:addCountMinus,children:/*#__PURE__*/_jsx(\"p\",{children:\"-\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:styles.newInput,children:addedAmount})}),/*#__PURE__*/_jsx(\"div\",{className:styles.quantityButton,onClick:addCountPlus,children:/*#__PURE__*/_jsx(\"p\",{children:\"+\"})})]})});return/*#__PURE__*/_jsx(\"form\",{className:styles.form,children:/*#__PURE__*/_jsx(\"div\",{className:styles.button,children:inputQuantity})});}export default CardButton;","map":{"version":3,"sources":["D:/JS-React/dimshishlik_update_23.08.2023/DimShashlik/src/components/Content/Item/CardButton.jsx"],"names":["React","useSelector","useDispatch","setBasketItemMinus","addItems","removeItems","styles","useEffect","CardButton","props","date","id","name","price","img","dispatch","basketItem","state","basket","items","find","obj","useState","isAmountValid","setIsAmountValid","addedAmount","undefined","amount","addCountPlus","cartItemId","addCountMinus","addOrder","cartItem","inputQuantity","inputContainer","input","quantityButton","newInput","form","button"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OACEC,kBADF,CAEEC,QAFF,CAGEC,WAHF,KAIO,mCAJP,CAKA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,SAAT,KAA0B,OAA1B,C,wFAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA2B,CACzB,gBAAiCA,KAAK,CAACC,IAAvC,CAAQC,EAAR,aAAQA,EAAR,CAAYC,IAAZ,aAAYA,IAAZ,CAAkBC,KAAlB,aAAkBA,KAAlB,CAAyBC,GAAzB,aAAyBA,GAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAGb,WAAW,EAA5B,CACA,GAAMc,CAAAA,UAAU,CAAGf,WAAW,CAAC,SAACgB,KAAD,QAC7BA,CAAAA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,IAAnB,CAAwB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACV,EAAJ,GAAWA,EAApB,EAAxB,CAD6B,EAAD,CAA9B,CAGA,oBAA0CX,KAAK,CAACsB,QAAN,CAAe,CAACN,UAAhB,CAA1C,oDAAOO,aAAP,qBAAsBC,gBAAtB,qBACA,GAAMC,CAAAA,WAAW,CAAGT,UAAU,EAAIU,SAAd,CAA0B,CAA1B,CAA8BV,UAAU,CAACW,MAA7D,CAEApB,SAAS,CAAC,UAAM,CACd,GAAIkB,WAAW,GAAK,CAApB,CAAuB,CACrBD,gBAAgB,CAAC,IAAD,CAAhB,CACD,CACF,CAJQ,CAIN,CAACC,WAAD,CAJM,CAAT,CAKA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,UAAU,CAAG,CACjBlB,EAAE,CAAFA,EADiB,CAAnB,CAGAI,QAAQ,CAACX,QAAQ,CAACyB,UAAD,CAAT,CAAR,CACD,CALD,CAMA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,GAAId,UAAU,CAACW,MAAX,EAAqB,CAAzB,CAA4B,CAC1BH,gBAAgB,CAAC,IAAD,CAAhB,CACAT,QAAQ,CAACV,WAAW,CAACM,EAAD,CAAZ,CAAR,CACD,CAHD,IAGO,CACLI,QAAQ,CAACZ,kBAAkB,CAACQ,EAAD,CAAnB,CAAR,CACD,CACF,CAPD,CASA,GAAMoB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GAAMC,CAAAA,QAAQ,CAAG,CACfrB,EAAE,CAAFA,EADe,CAEfC,IAAI,CAAJA,IAFe,CAGfC,KAAK,CAALA,KAHe,CAIfC,GAAG,CAAHA,GAJe,CAAjB,CAMAC,QAAQ,CAACX,QAAQ,CAAC4B,QAAD,CAAT,CAAR,CACAR,gBAAgB,CAAC,KAAD,CAAhB,CACD,CATD,CAWA,GAAMS,CAAAA,aAAa,CAAGV,aAAa,cACjC,eAAQ,OAAO,CAAEQ,QAAjB,+DADiC,cAGjC,YAAK,SAAS,CAAEzB,MAAM,CAAC4B,cAAvB,uBACE,aAAK,SAAS,CAAE5B,MAAM,CAAC6B,KAAvB,wBACE,YAAK,SAAS,CAAE7B,MAAM,CAAC8B,cAAvB,CAAuC,OAAO,CAAEN,aAAhD,uBACE,wBADF,EADF,cAIE,kCACE,UAAG,SAAS,CAAExB,MAAM,CAAC+B,QAArB,UAAgCZ,WAAhC,EADF,EAJF,cAOE,YAAK,SAAS,CAAEnB,MAAM,CAAC8B,cAAvB,CAAuC,OAAO,CAAER,YAAhD,uBACE,wBADF,EAPF,GADF,EAHF,CAkBA,mBACE,aAAM,SAAS,CAAEtB,MAAM,CAACgC,IAAxB,uBACE,YAAK,SAAS,CAAEhC,MAAM,CAACiC,MAAvB,UAAgCN,aAAhC,EADF,EADF,CAKD,CAED,cAAezB,CAAAA,UAAf","sourcesContent":["import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  setBasketItemMinus,\r\n  addItems,\r\n  removeItems,\r\n} from \"../../../redux/slices/basketSlice\";\r\nimport styles from \"./CardButton.module.css\";\r\nimport { useEffect } from \"react\";\r\n\r\nfunction CardButton(props) {\r\n  const { id, name, price, img } = props.date;\r\n\r\n  const dispatch = useDispatch();\r\n  const basketItem = useSelector((state) =>\r\n    state.basket.items.find((obj) => obj.id === id)\r\n  );\r\n  const [isAmountValid, setIsAmountValid] = React.useState(!basketItem);\r\n  const addedAmount = basketItem == undefined ? 0 : basketItem.amount;\r\n\r\n  useEffect(() => {\r\n    if (addedAmount === 0) {\r\n      setIsAmountValid(true);\r\n    }\r\n  }, [addedAmount]);\r\n  const addCountPlus = () => {\r\n    const cartItemId = {\r\n      id,\r\n    };\r\n    dispatch(addItems(cartItemId));\r\n  };\r\n  const addCountMinus = () => {\r\n    if (basketItem.amount <= 1) {\r\n      setIsAmountValid(true);\r\n      dispatch(removeItems(id));\r\n    } else {\r\n      dispatch(setBasketItemMinus(id));\r\n    }\r\n  };\r\n\r\n  const addOrder = () => {\r\n    const cartItem = {\r\n      id,\r\n      name,\r\n      price,\r\n      img,\r\n    };\r\n    dispatch(addItems(cartItem));\r\n    setIsAmountValid(false);\r\n  };\r\n\r\n  const inputQuantity = isAmountValid ? (\r\n    <button onClick={addOrder}>В корзину</button>\r\n  ) : (\r\n    <div className={styles.inputContainer}>\r\n      <div className={styles.input}>\r\n        <div className={styles.quantityButton} onClick={addCountMinus}>\r\n          <p>-</p>\r\n        </div>\r\n        <div>\r\n          <p className={styles.newInput}>{addedAmount}</p>\r\n        </div>\r\n        <div className={styles.quantityButton} onClick={addCountPlus}>\r\n          <p>+</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <form className={styles.form}>\r\n      <div className={styles.button}>{inputQuantity}</div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CardButton;\r\n"]},"metadata":{},"sourceType":"module"}