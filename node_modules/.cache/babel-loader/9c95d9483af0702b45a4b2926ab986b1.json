{"ast":null,"code":"import _slicedToArray from\"D:\\\\JS-React\\\\dimshishlik_update_23.08.2023\\\\DimShashlik\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useRef,useState}from\"react\";import styles from\"./Modal.module.css\";import CartItem from\"./CartItem/CartItem\";import{useDispatch,useSelector}from\"react-redux\";import{fetchOrder}from\"../../redux/slices/orderSlice\";import{useForm}from\"react-hook-form\";import zeroBasket from\"../../img/BasketZero.png\";import ClearTop from\"../../img/ClearTop.svg\";import Delivery from\"./Delivery/Delivery\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Modal(props){var _useForm=useForm(),handleSubmit=_useForm.handleSubmit,register=_useForm.register;var dispatch=useDispatch();var basketItem=useSelector(function(state){return state.basket.items;});var itemPrice=useSelector(function(state){return state.basket.totalPrice;});var _useState=useState(true),_useState2=_slicedToArray(_useState,2),basket=_useState2[0],setBasket=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var addTimeHandler=function addTimeHandler(time){setTime(time);};var onSubmit=function onSubmit(data){// Ваша обработка данных формы в родительском компоненте\nconsole.log(\"Данные из родительского компонента:\",data);order={price:itemPrice,delivery:{addressPoint:data.addressPoint,address:data.address,phone:data.phone,addition:data.addition,time:time},basketItem:basketItem};console.log(order);dispatch(fetchOrder(order));};var handleChildFormSubmit=function handleChildFormSubmit(){// Вызов handleSubmit из родительского компонента\nhandleSubmit(onSubmit)();};var order={price:\"\",delivery:{addressPoint:\"\",address:\"\",phone:\"\",addition:\"\",time:\"\"},basketItem:basketItem};var zeroCart=/*#__PURE__*/_jsxs(\"div\",{className:styles.basketZero,children:[/*#__PURE__*/_jsx(\"img\",{src:zeroBasket}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\\u044F, \\u043A\\u0430\\u043A \\u0442\\u0430\\u043A?\"})]});var onClickBack=function onClickBack(){setBasket(true);};// const dataItem = (time) => {\n//   console.log(time);\n//   order = {\n//     price: itemPrice,\n//     delivery: {\n//       addressPoint: dataDelivery.addressPoint,\n//       address: dataDelivery.address,\n//       phone: dataDelivery.phone,\n//       addition: dataDelivery.addition,\n//       time: time,\n//     },\n//     basketItem,\n//   };\n//   console.log(order);\n//   dispatch(fetchOrder(order));\n// };\nvar DeliveryAndCart=basketItem.length>0?basketItem.map(function(meal){return/*#__PURE__*/_jsx(CartItem,{id:meal.id,name:meal.name,price:meal.price,img:meal.img,amount:meal.amount},meal.id);}):zeroCart;var basketDecor=basket?DeliveryAndCart:/*#__PURE__*/_jsx(Delivery,{back:onClickBack,register:register,addDataItemTime:addTimeHandler});var buttonText=basket&&basketItem.length>0?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setBasket(false);},children:\"\\u041A \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0435\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){// dataItem();\nhandleChildFormSubmit();},children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C\"});var notActiveButton=basketItem.length>0?buttonText:/*#__PURE__*/_jsx(\"button\",{children:\"\\u0411\\u0440\\u0430\\u0442, \\u0437\\u0430\\u043A\\u0430\\u0436\\u0438 \\u0431\\u043B\\u044E\\u0434\\u043E!\"});return/*#__PURE__*/_jsx(\"div\",{className:styles.overlay,onClick:props.close,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.drawer,onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.title,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"img\",{src:ClearTop,onClick:props.close})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.br}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:basketDecor}),/*#__PURE__*/_jsxs(\"div\",{className:styles.CartTotalBlock,children:[/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E:\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"b\",{children:[itemPrice,\" \\u0440\\u0443\\u0431.\"]})]})}),notActiveButton]})]})});}export default Modal;","map":{"version":3,"sources":["D:/JS-React/dimshishlik_update_23.08.2023/DimShashlik/src/components/Modal/Modal.jsx"],"names":["React","useRef","useState","styles","CartItem","useDispatch","useSelector","fetchOrder","useForm","zeroBasket","Delivery","Modal","props","handleSubmit","register","dispatch","basketItem","state","basket","items","itemPrice","totalPrice","setBasket","time","setTime","addTimeHandler","onSubmit","data","console","log","order","price","delivery","addressPoint","address","phone","addition","handleChildFormSubmit","zeroCart","basketZero","onClickBack","DeliveryAndCart","length","map","meal","id","name","img","amount","basketDecor","buttonText","notActiveButton","overlay","close","drawer","e","stopPropagation","title","ClearTop","br","item","CartTotalBlock"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport styles from \"./Modal.module.css\";\r\nimport CartItem from \"./CartItem/CartItem\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchOrder } from \"../../redux/slices/orderSlice\";\r\nimport { useForm } from \"react-hook-form\";\r\n\r\nimport zeroBasket from \"../../img/BasketZero.png\";\r\nimport ClearTop from \"../../img/ClearTop.svg\";\r\nimport Delivery from \"./Delivery/Delivery\";\r\n\r\nfunction Modal(props) {\r\n  const { handleSubmit, register } = useForm();\r\n  const dispatch = useDispatch();\r\n  const basketItem = useSelector((state) => state.basket.items);\r\n  const itemPrice = useSelector((state) => state.basket.totalPrice);\r\n  const [basket, setBasket] = useState(true);\r\n  const [time, setTime] = useState(\"\");\r\n\r\n  const addTimeHandler = (time) => {\r\n    setTime(time);\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    // Ваша обработка данных формы в родительском компоненте\r\n    console.log(\"Данные из родительского компонента:\", data);\r\n\r\n    order = {\r\n      price: itemPrice,\r\n      delivery: {\r\n        addressPoint: data.addressPoint,\r\n        address: data.address,\r\n        phone: data.phone,\r\n        addition: data.addition,\r\n        time: time,\r\n      },\r\n      basketItem,\r\n    };\r\n    console.log(order);\r\n    dispatch(fetchOrder(order));\r\n  };\r\n\r\n  const handleChildFormSubmit = () => {\r\n    // Вызов handleSubmit из родительского компонента\r\n    handleSubmit(onSubmit)();\r\n  };\r\n\r\n  let order = {\r\n    price: \"\",\r\n    delivery: {\r\n      addressPoint: \"\",\r\n      address: \"\",\r\n      phone: \"\",\r\n      addition: \"\",\r\n      time: \"\",\r\n    },\r\n    basketItem,\r\n  };\r\n\r\n  const zeroCart = (\r\n    <div className={styles.basketZero}>\r\n      <img src={zeroBasket} />\r\n      <h3>Корзина пустая, как так?</h3>\r\n    </div>\r\n  );\r\n\r\n  const onClickBack = () => {\r\n    setBasket(true);\r\n  };\r\n\r\n  // const dataItem = (time) => {\r\n  //   console.log(time);\r\n  //   order = {\r\n  //     price: itemPrice,\r\n  //     delivery: {\r\n  //       addressPoint: dataDelivery.addressPoint,\r\n  //       address: dataDelivery.address,\r\n  //       phone: dataDelivery.phone,\r\n  //       addition: dataDelivery.addition,\r\n  //       time: time,\r\n  //     },\r\n  //     basketItem,\r\n  //   };\r\n  //   console.log(order);\r\n  //   dispatch(fetchOrder(order));\r\n  // };\r\n\r\n  const DeliveryAndCart =\r\n    basketItem.length > 0\r\n      ? basketItem.map((meal) => (\r\n          <CartItem\r\n            key={meal.id}\r\n            id={meal.id}\r\n            name={meal.name}\r\n            price={meal.price}\r\n            img={meal.img}\r\n            amount={meal.amount}\r\n          />\r\n        ))\r\n      : zeroCart;\r\n\r\n  const basketDecor = basket ? (\r\n    DeliveryAndCart\r\n  ) : (\r\n    <Delivery\r\n      back={onClickBack}\r\n      register={register}\r\n      addDataItemTime={addTimeHandler}\r\n    />\r\n  );\r\n\r\n  const buttonText =\r\n    basket && basketItem.length > 0 ? (\r\n      <button onClick={() => setBasket(false)}>К доставке</button>\r\n    ) : (\r\n      <button\r\n        onClick={() => {\r\n          // dataItem();\r\n          handleChildFormSubmit();\r\n        }}\r\n      >\r\n        Заказать\r\n      </button>\r\n    );\r\n  const notActiveButton =\r\n    basketItem.length > 0 ? buttonText : <button>Брат, закажи блюдо!</button>;\r\n\r\n  return (\r\n    <div className={styles.overlay} onClick={props.close}>\r\n      <div className={styles.drawer} onClick={(e) => e.stopPropagation()}>\r\n        <div className={styles.title}>\r\n          <h2>Корзина</h2>\r\n          <img src={ClearTop} onClick={props.close} />\r\n        </div>\r\n        <div className={styles.br}></div>\r\n        <div className={styles.item}>{basketDecor}</div>\r\n        <div className={styles.CartTotalBlock}>\r\n          <ul>\r\n            <li>\r\n              <span>Итого:</span>\r\n              <div></div>\r\n              <b>{itemPrice} руб.</b>\r\n            </li>\r\n          </ul>\r\n          {notActiveButton}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n"]},"metadata":{},"sourceType":"module"}