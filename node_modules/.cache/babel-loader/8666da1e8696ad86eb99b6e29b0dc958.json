{"ast":null,"code":"import _slicedToArray from\"D:\\\\JS-React\\\\dimshishlik_update_23.08.2023\\\\DimShashlik\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from\"react\";import styles from\"./Modal.module.css\";import CartItem from\"./CartItem/CartItem\";import{useDispatch,useSelector}from\"react-redux\";import{fetchOrder}from\"../../redux/slices/orderSlice\";import zeroBasket from\"../../img/BasketZero.png\";import ClearTop from\"../../img/ClearTop.svg\";import Delivery from\"./Delivery/Delivery\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Modal(props){var dispatch=useDispatch();var basketItem=useSelector(function(state){return state.basket.items;});var itemPrice=useSelector(function(state){return state.basket.totalPrice;});var dataDelivery=useSelector(function(state){return state.basket.delivery;});var _useState=useState(true),_useState2=_slicedToArray(_useState,2),basket=_useState2[0],setBasket=_useState2[1];var order={price:\"\",delivery:{addressPoint:\"\",address:\"\",phone:\"\",time:\"\"},basketItem:basketItem};var zeroCart=/*#__PURE__*/_jsxs(\"div\",{className:styles.basketZero,children:[/*#__PURE__*/_jsx(\"img\",{src:zeroBasket}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430\\u044F, \\u043A\\u0430\\u043A \\u0442\\u0430\\u043A?\"})]});var onClickBack=function onClickBack(){setBasket(true);};var dataItem=function dataItem(){order={price:itemPrice,delivery:{addressPoint:dataDelivery.addressPoint,address:dataDelivery.address,phone:dataDelivery.phone,time:dataDelivery.time},basketItem:basketItem};dispatch(fetchOrder(order));};var DeliveryAndCart=basketItem.length>0?basketItem.map(function(meal){return/*#__PURE__*/_jsx(CartItem,{id:meal.id,name:meal.name,price:meal.price,img:meal.img,amount:meal.amount},meal.id);}):zeroCart;var basketDecor=basket?DeliveryAndCart:/*#__PURE__*/_jsx(Delivery,{back:onClickBack});var buttonText=basket&&basketItem.length>0?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setBasket(false);},children:\"\\u041A \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0435\"}):/*#__PURE__*/_jsx(\"button\",{onClick:dataItem,children:\"\\u0417\\u0430\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C\"});return/*#__PURE__*/_jsx(\"div\",{className:styles.overlay,onClick:props.close,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.drawer,onClick:function onClick(e){return e.stopPropagation();},children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.title,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"img\",{src:ClearTop,onClick:props.close})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.br}),/*#__PURE__*/_jsx(\"div\",{className:styles.item,children:basketDecor}),/*#__PURE__*/_jsxs(\"div\",{className:styles.CartTotalBlock,children:[/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0442\\u043E\\u0433\\u043E:\"}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"b\",{children:[itemPrice,\" \\u0440\\u0443\\u0431.\"]})]})}),buttonText]})]})});}export default Modal;","map":{"version":3,"sources":["D:/JS-React/dimshishlik_update_23.08.2023/DimShashlik/src/components/Modal/Modal.jsx"],"names":["React","useState","styles","CartItem","useDispatch","useSelector","fetchOrder","zeroBasket","Delivery","Modal","props","dispatch","basketItem","state","basket","items","itemPrice","totalPrice","dataDelivery","delivery","setBasket","order","price","addressPoint","address","phone","time","zeroCart","basketZero","onClickBack","dataItem","DeliveryAndCart","length","map","meal","id","name","img","amount","basketDecor","buttonText","overlay","close","drawer","e","stopPropagation","title","ClearTop","br","item","CartTotalBlock"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport styles from \"./Modal.module.css\";\r\nimport CartItem from \"./CartItem/CartItem\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchOrder } from \"../../redux/slices/orderSlice\";\r\n\r\nimport zeroBasket from \"../../img/BasketZero.png\";\r\nimport ClearTop from \"../../img/ClearTop.svg\";\r\nimport Delivery from \"./Delivery/Delivery\";\r\n\r\nfunction Modal(props) {\r\n  const dispatch = useDispatch();\r\n  const basketItem = useSelector((state) => state.basket.items);\r\n  const itemPrice = useSelector((state) => state.basket.totalPrice);\r\n  const dataDelivery = useSelector((state) => state.basket.delivery);\r\n  const [basket, setBasket] = useState(true);\r\n\r\n  let order = {\r\n    price: \"\",\r\n    delivery: {\r\n      addressPoint: \"\",\r\n      address: \"\",\r\n      phone: \"\",\r\n      time: \"\",\r\n    },\r\n    basketItem,\r\n  };\r\n\r\n  const zeroCart = (\r\n    <div className={styles.basketZero}>\r\n      <img src={zeroBasket} />\r\n      <h3>Корзина пустая, как так?</h3>\r\n    </div>\r\n  );\r\n\r\n  const onClickBack = () => {\r\n    setBasket(true);\r\n  };\r\n\r\n  const dataItem = () => {\r\n    order = {\r\n      price: itemPrice,\r\n      delivery: {\r\n        addressPoint: dataDelivery.addressPoint,\r\n        address: dataDelivery.address,\r\n        phone: dataDelivery.phone,\r\n        time: dataDelivery.time,\r\n      },\r\n      basketItem,\r\n    };\r\n    dispatch(fetchOrder(order));\r\n  };\r\n\r\n  const DeliveryAndCart =\r\n    basketItem.length > 0\r\n      ? basketItem.map((meal) => (\r\n          <CartItem\r\n            key={meal.id}\r\n            id={meal.id}\r\n            name={meal.name}\r\n            price={meal.price}\r\n            img={meal.img}\r\n            amount={meal.amount}\r\n          />\r\n        ))\r\n      : zeroCart;\r\n\r\n  const basketDecor = basket ? (\r\n    DeliveryAndCart\r\n  ) : (\r\n    <Delivery back={onClickBack} />\r\n  );\r\n  const buttonText =\r\n    basket && basketItem.length > 0 ? (\r\n      <button onClick={() => setBasket(false)}>К доставке</button>\r\n    ) : (\r\n      <button onClick={dataItem}>Заказать</button>\r\n    );\r\n\r\n  return (\r\n    <div className={styles.overlay} onClick={props.close}>\r\n      <div className={styles.drawer} onClick={(e) => e.stopPropagation()}>\r\n        <div className={styles.title}>\r\n          <h2>Корзина</h2>\r\n          <img src={ClearTop} onClick={props.close} />\r\n        </div>\r\n        <div className={styles.br}></div>\r\n        <div className={styles.item}>{basketDecor}</div>\r\n        <div className={styles.CartTotalBlock}>\r\n          <ul>\r\n            <li>\r\n              <span>Итого:</span>\r\n              <div></div>\r\n              <b>{itemPrice} руб.</b>\r\n            </li>\r\n          </ul>\r\n          {buttonText}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modal;\r\n"]},"metadata":{},"sourceType":"module"}